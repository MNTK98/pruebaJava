<!DOCTYPE html>
<html lang="en">
<th:block th:include="index :: head" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1.0" />
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<script src="js/datatables/jquery.dataTables.js" type="text/javascript"></script>
<script src="js/datatables/dataTables.bootstrap.js"
	type="text/javascript"></script>

  <title>Consignatario</title>

  <!-- CSS  -->

</head>
<body>
  <nav class="light-blue lighten-1" role="navigation"></nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <h1 class="header center blue-text">Consignatarios</h1>
      <br><br>
    </div>
  </div>


  <div class="container">
    <div class="section">

<div class="datatable-container" style="width: 100%">
				<div class="car">
					<div class="card-body">
						<table id="table1" class="table table-bordered table-striped"
							style="width: 100%">
							<thead>
								<tr>
									<th>Id</th>
									<th>Nombre</th>
									<th>Fecha de registro</th>
									<th>Fecha de modificacion</th>
									
									<th>Activo</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="consignatario : ${consignatario}">

									<td style="font-size: 13px;" th:text="${consignatario.consignatarioid}">Mostrar</td>
									<td style="font-size: 13px;" th:text="${consignatario.cliente.clientenombre}">Mostrar</td>
									<td style="font-size: 13px;"
										th:text="${consignatario.consignatariofechacreacion}">Mostrar</td>
									<td style="font-size: 13px;"
										th:text="${consignatario.consignatariofechamodificacion}">Mostrar</td>
									<td style="font-size: 13px;" th:if="${consignatario.consignatarioactivo==true}">Sí</td>
									<td style="font-size: 13px;" th:if="${consignatario.consignatarioactivo !=true}">No</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

			</div>

    </div>
    <br>
  <div>

<h3>Registrar nuevo consignatario</h3>
			<div>
			<form id="formCliente" th:action="@{/consignatario/create}" th:object="${consignatario}" method="post">  
			<div class="col-md-5">
				<br><label for="consignatarionombre"> <span>Nombre del Consignatario</span> <span
					class="text-danger text-lg font-weight-bold">*</span>
				</label>
			</div>
			
			
			<div class="col-md-5">
				<input type="text" class="form-control"  id="consignatarionombre" name="consignatarionombre"  />
			</div>	
				
			<input class="form-check-input" name="activo" type="hidden" th:value="true"checked required/>
			<input class="form-check-input" name="clienteid" type="hidden" th:value="${consignatarioid}"checked required/>
			<input class="form-check-input" name="cliente" id="cliente" type="hidden" th:value="${consignatarioid}"checked required/>
			
			
			<button type="submit" class="btn btn-primary">Guardar</button>			
		</form> 

<script th:inline="javascript">
$(document).ready(function() {
	  $("#formCliente").submit(function(event) {
	    event.preventDefault();
	    if ($("#consignatarionombre").val() === "") {
	      alert("El nombre del consignatario es requerido");
	    } else {
let nombre=$("#consignatarionombre").val();
let cliente=$("#clienteid").val();
	      guardarCliente(nombre,cliente);
	    }
	  });
	});


function guardarCliente(nombre,cliente) {
	  $.ajax({
	    type: "POST",  
	    url: "../consignatario/create",
	    data: { consignatarionombre:nombre, cliente:},	 
	    success: function(result) {
	      console.log(result);
	      alert("Consignatario guardado con éxito");
	      window.location.reload();
	    },
	    error: function(e) {
	      console.log("Error: ", e);
	    }
	  });
	}
</script>

</div>


		</div>
	</div>

  

  
<footer class="page-footer blue" style="position:fixed;bottom:0;left:0;width:100%;" >
    <div class="container">
      <div class="row">
        <div class="col l12 s12">
          <h6 class="white-text" style="text-align: center;">Prueba Java</h6>      
        </div>
      </div>
    </div>
    <div class="footer-copyright">
    </div>
  </footer>
</body>
</html>
